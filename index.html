<head>
<!-- SEO essentials for home -->
<title>متجر تاجر السعودية | تسوق أونلاين | شحن داخل السعودية</title>
<meta name="description" content="متجر تاجر السعودية يقدم منتجات مختارة مع شحن داخل السعودية وخيار الدفع عند الاستلام. تسوق الآن.">
<link rel="canonical" href="https://sherow1982.github.io/saudi-matjar.arabsad.com/">
<meta name="robots" content="index,follow">
<link rel="alternate" href="https://sherow1982.github.io/saudi-matjar.arabsad.com/" hreflang="ar-sa">
<meta name="theme-color" content="#0b57d0">
<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8">
  <title>متجر تاجر السعودية</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="تصفح أحدث المنتجات حسب الفئات وتسوق الآن مع شحن داخل السعودية.">
  <link rel="canonical" href="https://sherow1982.github.io/saudi-matjar.arabsad.com/">
  <style>
    :root{
      --brand:#0b57d0; --bg:#f9fafb; --text:#111827; --muted:#6b7280;
      --card:#fff; --border:#e5e7eb; --accent:#0b8457; --danger:#b91c1c;
      --tab-bg:#eef3fd; --tab:#0b57d0; --price:#0a7a4a; --wa:#25D366;
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0}
    body{
      font-family:'Tajawal',system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg); color:var(--text); line-height:1.6;
    }

    .top-nav{position:sticky;top:0;z-index:1000;background:#fff;border-bottom:1px solid var(--border);backdrop-filter:saturate(150%) blur(4px)}
    .top-nav .wrap{max-width:1200px;margin-inline:auto;padding:10px 16px;display:flex;gap:12px;align-items:center;flex-wrap:wrap}
    .brand{font-weight:800;color:var(--brand);white-space:nowrap}
    .top-nav ul{margin:0;padding:0;list-style:none;display:flex;gap:12px;flex-wrap:wrap}
    .top-nav a{text-decoration:none;color:var(--brand);padding:6px 10px;border-radius:8px;display:inline-block;transition:background .15s}
    .top-nav a:hover{background:#eef3fd}

    .header{max-width:1200px;margin:14px auto 0;padding:0 16px;color:var(--brand);font-weight:900;text-align:center}
    .subtitle{max-width:1200px;margin:4px auto 0;padding:0 16px;text-align:center;color:#374151;font-weight:700}
    #search{width:min(100%,1200px);display:block;margin:12px auto 8px;padding:12px 14px;border-radius:10px;border:1px solid var(--border);font-weight:600;direction:rtl}

    .tabs{max-width:1200px;margin:6px auto 0;padding:0 16px 6px;display:flex;gap:8px;flex-wrap:wrap}
    .tab{background:#fff;border:1px solid var(--border);color:var(--tab);padding:6px 10px;border-radius:999px;cursor:pointer;font-weight:700;display:flex;align-items:center;gap:8px}
    .tab.active{background:var(--tab-bg);border-color:var(--tab);box-shadow:0 1px 3px rgba(11,87,208,.12) inset}
    .tab .count{background:#fff;border:1px solid var(--border);padding:0 8px;border-radius:999px;font-weight:800;color:#000}

    .grid{max-width:1200px;margin:10px auto 120px;padding:0 16px;display:grid;grid-template-columns:repeat(auto-fit,minmax(210px,1fr));gap:14px}
    .card{background:var(--card);padding:12px;border-radius:12px;border:1px solid var(--border);box-shadow:0 1px 4px rgba(0,0,0,.06);transition:transform .15s,box-shadow .15s;text-align:center;display:flex;flex-direction:column;min-height:330px}
    .card:hover{transform:translateY(-2px);box-shadow:0 8px 24px rgba(0,0,0,.08)}
    .product-image{width:100%;height:190px;object-fit:contain;margin-bottom:8px;background:#fff;border:1px solid #eee;border-radius:10px}
    .title{font-weight:800;margin:.4rem 0;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;min-height:48px;line-height:1.3}

    /* price emphasized */
    .price{
      display:inline-block;
      margin:6px 0 8px;
      padding:6px 10px;
      background:#ecfdf5;
      color:var(--price);
      border:1px solid #bbf7d0;
      border-radius:10px;
      font-weight:900;
      font-size:1.1rem;
    }

    .btns{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:auto}
    .btn{
      font-weight:900;padding:12px 14px;border-radius:10px;text-decoration:none;text-align:center;
      display:flex;align-items:center;justify-content:center;min-height:46px;line-height:1.2;flex:1 1 48%;
    }
    .btn-primary{background:var(--brand);color:#fff}
    .btn-primary:hover{opacity:.92}
    .btn-wa{background:var(--wa);color:#fff}

    .loading,.empty{text-align:center;color:var(--muted);font-weight:800;margin:24px 0}
    .error{color:var(--danger);font-weight:800}

    .whatsapp-btn{position:fixed;bottom:20px;inset-inline-end:20px;background:var(--wa);color:#fff;padding:12px 16px;font-weight:800;border-radius:50px;z-index:9999;text-align:center;text-decoration:none;box-shadow:0 4px 10px rgba(0,0,0,.2)}

    @media (max-width:480px){
      .grid{grid-template-columns:repeat(auto-fit,minmax(170px,1fr))}
      .product-image{height:170px}
      .btn{flex:1 1 100%}
    }
  </style>
</head>
<body>

  <nav class="top-nav" aria-label="legal pages">
    <div class="wrap">
      <span class="brand">روابط مهمة:</span>
      <ul>
        <li><a href="pages/shipping-policy.html">سياسة الشحن</a></li>
        <li><a href="pages/who-we-are.html">من نحن</a></li>
        <li><a href="pages/terms-and-conditions.html">شروط الاستخدام</a></li>
        <li><a href="pages/about-our-store.html">لمحة ونبذة عن متجرنا</a></li>
        <li><a href="pages/social-media-pages.html">صفحات التواصل الاجتماعي</a></li>
        <li><a href="pages/privacy-policy.html">سياسات الخصوصية</a></li>
        <li><a href="pages/contact-us.html">اتصل بنا</a></li>
        <li><a href="pages/refund-policy.html">سياسة الاستبدال والاسترجاع</a></li>
      </ul>
    </div>
  </nav>

  <h1 class="header">متجر تاجر السعودية</h1>
  <p class="subtitle">تسوق حسب الفئات</p>
  <input type="text" id="search" placeholder="ابحث عن منتج أو فئة...">

  <div id="tabs" class="tabs" role="tablist" aria-label="فئات المنتجات"></div>

  <div id="grid" class="grid" aria-live="polite">
    <p class="loading">جارٍ تحميل المنتجات...</p>
  </div>

  <a id="floatingWA" href="https://wa.me/201110760081" target="_blank" rel="noopener noreferrer" class="whatsapp-btn" aria-label="WhatsApp">راسلنا واتساب الآن</a>

  <script>
    const FEED_URL = "https://api.easy-orders.net/api/v1/products/feed/37ad236e4a0f46e29792dd52978832bc/channel/google";
    const SITE_BASE = "https://sherow1982.github.io/saudi-matjar.arabsad.com";
    const ITEMS_PER_LOAD = 12;
    const WHATSAPP_NUMBER = "201110760081";

    let allProducts = [];
    let byCategory = new Map();
    let currentCategory = "الكل";
    let filtered = [];
    let cursor = 0;

    function slugify(s){
      s = (s || "").trim().toLowerCase();
      s = s.replace(/[^a-z0-9\-]+/g,"-").replace(/\-+/g,"-").replace(/^\-|\-$/g,"");
      return s || "item";
    }

    // robust parser for varied price formats (e.g., "123.45 SAR", "123,45", "١٢٣٫٤٥")
    function parsePrice(raw){
      if(raw == null) return NaN;
      let s = String(raw).trim();
      // keep digits, dot, comma, Arabic decimal/grouping marks
      s = s.replace(/[^\d.,٫٬]/g, "");
      // unify Arabic marks to dot
      s = s.replace(/[٫٬]/g, ".");
      // handle cases with both comma and dot: assume comma thousands
      if (s.includes(",") && s.includes(".")) {
        s = s.replace(/,/g, "");
      } else if (s.includes(",")) {
        // treat comma as decimal
        s = s.replace(/,/g, ".");
      }
      const n = parseFloat(s);
      return isFinite(n) ? n : NaN;
    }

    function formatSAR(v){
      if(!isFinite(v)) return "—";
      return Number(v).toFixed(1) + " ر.س";
    }

    function chooseCategory(title, explicit){
      const cat = (explicit || "").trim();
      if(cat) return cat;
      const t = (title || "").toLowerCase();
      if(t.includes("عطر")||t.includes("perf")) return "عطور";
      if(t.includes("ساعة")||t.includes("watch")) return "ساعات";
      if(t.includes("حقيبة")||t.includes("bag")) return "حقائب";
      if(t.includes("قميص")||t.includes("shirt")||t.includes("تيشيرت")) return "ملابس";
      return "أخرى";
    }

    async function fetchFeed(){
      const res = await fetch(FEED_URL, { headers: { 'Accept':'application/xml,text/xml;q=0.9,*/*;q=0.8' }});
      if(!res.ok) throw new Error("Feed HTTP " + res.status);
      const text = await res.text();
      const xml = new DOMParser().parseFromString(text, "application/xml");
      if(xml.querySelector("parsererror")) throw new Error("XML parse error");
      const items = xml.querySelectorAll("item");
      const data = [];
      items.forEach(item=>{
        const title = item.querySelector("title")?.textContent?.trim() || "منتج بدون اسم";
        const gid = item.querySelector("g\\:id, id")?.textContent?.trim() || title;
        const slug = slugify(gid);
        const link = SITE_BASE + "/product/" + slug + "/";
        const image = item.querySelector("g\\:image_link, image_link, image")?.textContent?.trim() || "";
        const priceRaw = item.querySelector("g\\:price, price")?.textContent?.trim() || "";
        const price = parsePrice(priceRaw);
        const explicitCat = item.querySelector("g\\:product_type, product_type, category")?.textContent?.trim() || "";
        const category = chooseCategory(title, explicitCat);
        data.push({ title, link, image, price, category, slug });
      });
      return data;
    }

    function makeWhatsAppLink(title, price){
      const msg = `أرغب في طلب المنتج: ${title} | السعر: ${formatSAR(price)}`;
      const encoded = encodeURIComponent(msg);
      return `https://wa.me/${WHATSAPP_NUMBER}?text=${encoded}`;
    }

    function createCard(p){
      const el = document.createElement("div");
      el.className = "card";
      const waHref = makeWhatsAppLink(p.title, p.price);
      el.innerHTML = `
        <a href="${p.link}" target="_blank" rel="noopener noreferrer" aria-label="صفحة المنتج">
          <img data-src="${p.image}" class="product-image lazy" alt="${p.title.replace(/"/g,'&quot;')}">
        </a>
        <h2 class="title">${p.title}</h2>
        <span class="price">${formatSAR(p.price)}</span>
        <div class="btns">
          <a href="${p.link}" target="_blank" rel="noopener noreferrer" class="btn btn-primary">تسوق الآن</a>
          <a href="${waHref}" target="_blank" rel="noopener noreferrer" class="btn btn-wa">واتساب</a>
        </div>
      `;
      queueMicrotask(()=>{
        const img = el.querySelector("img");
        img.onerror = ()=>{ img.src = "https://via.placeholder.com/400x300?text=No+Image"; };
      });
      return el;
    }

    function renderTabs(){
      const tabs = document.getElementById("tabs");
      tabs.innerHTML = "";
      const entries = Array.from(byCategory.entries()).map(([cat, arr]) => ({cat, count: arr.length})).sort((a,b)=> a.cat.localeCompare(b.cat,'ar'));
      tabs.appendChild(makeTab("الكل", allProducts.length, currentCategory==="الكل"));
      entries.forEach(({cat,count})=> tabs.appendChild(makeTab(cat, count, currentCategory===cat)));
    }

    function makeTab(cat, count, active){
      const btn = document.createElement("button");
      btn.className = "tab" + (active ? " active" : "");
      btn.setAttribute("role","tab");
      btn.setAttribute("aria-selected", active ? "true" : "false");
      btn.innerHTML = `${cat} <span class="count">${count}</span>`;
      btn.addEventListener("click", ()=>{
        currentCategory = cat;
        cursor = 0;
        applyFiltersAndRender();
        document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
        btn.classList.add("active");
      });
      return btn;
    }

    function applyFiltersAndRender(){
      const q = document.getElementById("search").value.trim().toLowerCase();
      const base = currentCategory==="الكل" ? allProducts : (byCategory.get(currentCategory) || []);
      filtered = q ? base.filter(p => p.title.toLowerCase().includes(q) || p.category.toLowerCase().includes(q)) : base;
      const grid = document.getElementById("grid");
      grid.innerHTML = "";
      if(filtered.length === 0){
        grid.innerHTML = `<p class="empty">لا توجد نتائج مطابقة.</p>`;
        return;
      }
      loadMore();
    }

    function loadMore(){
      const grid = document.getElementById("grid");
      const slice = filtered.slice(cursor, cursor + ITEMS_PER_LOAD);
      slice.forEach(p => grid.appendChild(createCard(p)));
      cursor += ITEMS_PER_LOAD;
      lazyImages();
    }

    function lazyImages(){
      const imgs = document.querySelectorAll("img.lazy");
      const obs = new IntersectionObserver((entries, o)=>{
        entries.forEach(e=>{
          if(e.isIntersecting){
            e.target.src = e.target.dataset.src || "";
            e.target.classList.remove("lazy");
            o.unobserve(e.target);
          }
        });
      }, {rootMargin:"0px 0px 200px 0px", threshold:0});
      imgs.forEach(img => obs.observe(img));
    }

    document.getElementById("search").addEventListener("input", ()=>{ cursor = 0; applyFiltersAndRender(); });
    window.addEventListener("scroll", ()=>{ if((window.innerHeight + window.scrollY) >= document.body.offsetHeight - 160 && cursor < filtered.length){ loadMore(); } });

    async function init(){
      const grid = document.getElementById("grid");
      grid.innerHTML = `<p class="loading">جارٍ تحميل المنتجات...</p>`;
      try{
        allProducts = await fetchFeed();
        byCategory = new Map();
        allProducts.forEach(p=>{ const key = p.category || "أخرى"; if(!byCategory.has(key)) byCategory.set(key, []); byCategory.get(key).push(p); });
        renderTabs();
        applyFiltersAndRender();
      }catch(err){
        console.error(err);
        grid.innerHTML = `<p class="loading error">حدث خطأ في تحميل المنتجات. حاول لاحقاً.</p>`;
      }
      document.documentElement.style.scrollPaddingTop = "72px";
    }
    init();
  </script>
</body>
</html>
